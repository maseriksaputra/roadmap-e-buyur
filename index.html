<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="theme-color" content="#16a34a"/>
<title>E-Buyur â€¢ Roadmap & Perbaikan</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap');

/* ===== Reset & Vars ===== */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
:root{
  --brand-green:#16a34a; --brand-orange:#ea7a1f; --ink:#0b1220; --muted:#6b7280; --bg:#f5f5f5;
  --card:#ffffff; --line:#e5e7eb; --ink-2:#2d3748; --ink-3:#4a5568; --good:#10b981; --blue:#2563eb; --violet:#7c3aed;
  --nav:#0b1220dd; --shadow:0 10px 30px rgba(2,8,23,.08)
}

/* Print */
@page{size:A4;margin:0}
@media print{
  body{-webkit-print-color-adjust:exact;print-color-adjust:exact}
  .page-break{page-break-after:always}
  .no-break{page-break-inside:avoid}
  .print-button,.topnav{display:none!important}
  .container{box-shadow:none}
  .view:not(.active){display:none!important}
}

/* ===== Layout ===== */
body{
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
  line-height:1.65;color:var(--ink);background:var(--bg)
}
.container{
  max-width:210mm;margin:88px auto 40px;background:var(--card);
  min-height:297mm;padding:20mm;border-radius:14px;box-shadow:var(--shadow)
}
@media (max-width:900px){ .container{max-width:100%;margin:96px 0 32px;border-radius:0;min-height:auto;padding:24px} }
@media (max-width:480px){ .container{padding:18px;margin-top:92px} }

/* ===== Top Navigation (logo + tabs) ===== */
.topnav{
  position:fixed;inset:0 0 auto 0;height:64px;background:var(--nav);backdrop-filter:blur(10px);
  display:flex;align-items:center;justify-content:center;z-index:999;border-bottom:1px solid #0b122033
}
.nav-inner{width:100%;max-width:1150px;display:flex;gap:10px;align-items:center;justify-content:space-between;padding:0 12px}
.brand{display:flex;gap:8px;align-items:center}
.brand img{height:34px;width:auto;display:block}
.tabs{display:flex;gap:8px;flex-wrap:nowrap;align-items:center;justify-content:center;flex:1}
.tab-btn{
  appearance:none;border:none;cursor:pointer;padding:10px 14px;border-radius:999px;font-weight:900;
  color:#fff;background:#ffffff22;border:1px solid #ffffff33;transition:transform .15s, background .2s
}
.tab-btn:hover{transform:translateY(-1px);background:#ffffff33}
.tab-btn.active{background:#fff;color:#0b1220;border-color:#fff;box-shadow:0 8px 20px rgba(255,255,255,.15)}
.right-actions{display:flex;gap:10px}
.print-button{background:#fff;color:#0b1220;padding:9px 14px;border:none;border-radius:10px;font-weight:900;cursor:pointer;box-shadow:0 10px 20px rgba(255,255,255,.12)}
@media (max-width:600px){
  .tabs{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
  .tab-btn{width:100%}
  .right-actions{display:none}
}

/* ===== Header Card ===== */
.header{
  background:linear-gradient(135deg,var(--brand-green) 0%,var(--brand-orange) 100%);
  color:#fff;padding:26px;border-radius:14px;margin-bottom:24px;text-align:center;overflow:hidden
}
.header h1{font-size:30px;font-weight:900;margin-bottom:8px}
.header .subtitle{font-size:16px;opacity:.97}
.header .date-range{font-size:14px;margin-top:12px;padding:8px 16px;background:rgba(255,255,255,.22);border-radius:18px;display:inline-block}
.header .logo{display:flex;justify-content:center;margin-bottom:10px}
.header .logo img{height:84px;max-width:100%;object-fit:contain}
@media (max-width:900px){ .header .logo img{height:72px} }
@media (max-width:480px){ .header .logo img{height:64px} }

/* ===== Sections ===== */
.section{margin-bottom:28px}
.section-title{
  font-size:22px;font-weight:900;color:var(--ink-2);margin-bottom:14px;padding-bottom:10px;
  border-bottom:3px solid var(--brand-green);display:flex;align-items:center;gap:10px
}
.section-icon{width:30px;height:30px;border-radius:6px;background:var(--brand-green);color:#fff;display:inline-flex;align-items:center;justify-content:center;font-size:18px}
.dod-box{background:linear-gradient(135deg,#f6fef8 0%,#eefcf3 100%);border-left:4px solid var(--brand-green);padding:16px;border-radius:8px;margin-bottom:16px}
.dod-title{font-size:18px;font-weight:900;color:var(--ink-2);margin-bottom:8px}
.dod-list{list-style:none}
.dod-list li{padding:8px 0 8px 28px;position:relative;color:var(--ink-3)}
.dod-list li:before{content:"âœ“";position:absolute;left:0;color:var(--good);font-weight:900;font-size:18px}
.small-note{font-size:12px;color:var(--muted);margin-top:6px}

/* ===== Timeline ===== */
.timeline{margin:18px 0}
.week{background:#fff;border:1px solid #e2e8f0;border-radius:10px;margin-bottom:18px;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,.04)}
.week-header{background:linear-gradient(90deg,#334155 0%,#1f2937 100%);color:#fff;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
.week-title{font-size:16px;font-weight:900}
.week-dates{background:rgba(255,255,255,.25);padding:5px 10px;border-radius:14px;font-size:12px}
.week-content{padding:16px}
.week-objective{background:#f8fafc;padding:10px;border-radius:6px;margin-bottom:12px;border-left:3px solid var(--brand-green)}
.task-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:6px}
.task-column{background:#f9fafb;padding:12px;border-radius:8px;border:1px solid #edf2f7}
.task-owner{font-weight:900;color:var(--ink-2);margin-bottom:8px;padding-bottom:8px;border-bottom:2px solid #e2e8f0}
.task-list{list-style:none}
.task-list li{padding:6px 0 6px 18px;position:relative;font-size:14px;color:#475569}
.task-list li:before{content:"â–¸";position:absolute;left:0;color:var(--brand-green)}
.ac-title{font-size:12px;color:#374151;margin:8px 0 4px;font-weight:900}
.ac-list{list-style:none;margin-bottom:4px}
.ac-list li{padding:4px 0 4px 20px;position:relative;font-size:12.5px;color:#475569}
.ac-list li:before{content:"âœ“";position:absolute;left:0;color:var(--good);font-weight:900}
.output-box{background:#f0fff4;border:1px solid #9ae6b4;padding:10px 12px;border-radius:6px;margin-top:10px;font-size:14px;color:#22543d}
.output-box strong{color:#166534}
@media (max-width:900px){ .task-grid{grid-template-columns:1fr} }

/* ===== Calendar ===== */
.calendar{margin-top:10px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden}
.cal-header{display:flex;justify-content:space-between;align-items:center;background:#0f172a;color:#fff;padding:10px 12px;flex-wrap:wrap;gap:8px}
.cal-title{font-weight:900}
.cal-legend{display:flex;gap:10px;flex-wrap:wrap}
.legend-dot{display:inline-flex;align-items:center;gap:6px;font-size:12px}
.legend-dot i{display:inline-block;width:10px;height:10px;border-radius:999px}
.i-erik{background:var(--brand-green)} .i-devin{background:var(--brand-orange)} .i-qa{background:var(--blue)} .i-milestone{background:var(--violet)}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);border-top:1px solid #e5e7eb}
.cal-dayname,.cal-cell{padding:10px;border-right:1px solid #e5e7eb;border-bottom:1px solid #e5e7eb;min-height:64px}
.cal-dayname{background:#f8fafc;font-weight:900;font-size:12px;color:#334155;min-height:auto}
.cal-cell{position:relative;background:#ffffff}
.cal-cell.muted{background:#fafaf9;color:#9ca3af}
.cal-date{position:absolute;top:8px;left:8px;font-size:12px;font-weight:900;color:#334155}
.cal-dots{position:absolute;right:8px;bottom:8px;display:flex;gap:4px;flex-wrap:wrap}
.cal-dots span{width:8px;height:8px;border-radius:999px}
.cal-has{outline:2px solid rgba(22,163,74,.15);outline-offset:-2px;border-radius:8px}
.cal-pop{position:absolute;left:8px;right:8px;bottom:28px;background:#111827;color:#fff;font-size:12px;padding:6px 8px;border-radius:8px;display:none;box-shadow:0 8px 16px rgba(0,0,0,.25)}
.cal-cell:hover .cal-pop{display:block}
@media (max-width:900px){ .cal-dayname,.cal-cell{min-height:54px;padding:8px} .cal-dots span{width:7px;height:7px} }
@media (max-width:480px){ .cal-dayname,.cal-cell{min-height:48px;padding:6px} }

/* ===== Helpers ===== */
.badge{display:inline-block;padding:2px 6px;border-radius:999px;font-size:11px;color:#fff}
.badge.erik{background:var(--brand-green)} .badge.devin{background:var(--brand-orange)}
.badge.qa{background:var(--blue)} .badge.milestone{background:var(--violet)}
.view{display:none} .view.active{display:block}

/* ===== Perbaikan UI ===== */
.info-row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:8px 0 16px}
.kpi-card{background:#0b1220;color:#fff;border-radius:12px;padding:12px 14px;display:flex;flex-direction:column;gap:6px}
.kpi-card .big{font-size:22px;font-weight:900}
.kpi-card .label{opacity:.85;font-size:12px}
.filter-chips{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 10px}
.chip{border:1px solid var(--line);background:#fff;border-radius:999px;padding:6px 10px;font-weight:700;font-size:12px;color:#334155;cursor:pointer;display:inline-flex;gap:6px;align-items:center}
.chip.active{background:#111827;color:#fff;border-color:#111827}
.searchbar{display:flex;gap:8px;margin:8px 0 12px}
.searchbar input{flex:1;padding:10px 12px;border:1px solid var(--line);border-radius:10px;font:inherit}

.fix-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.fix-card{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff;box-shadow:0 2px 8px rgba(2,8,23,.04)}
.fix-head{background:#0f172a;color:#fff;padding:10px 12px;font-weight:900;display:flex;justify-content:space-between;align-items:center}
.fix-head small{opacity:.85}
.fix-body{padding:12px}
.fix-list{list-style:none}
.fix-list li{padding:8px 0 8px 28px;position:relative;color:#334155;border-bottom:1px dashed #eaeaea}
.fix-list li:last-child{border-bottom:none}
.fix-list li:before{content:"â€¢";position:absolute;left:10px;top:10px;color:var(--brand-green);font-weight:900}
.badge-cat{padding:2px 8px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:11px;font-weight:800}
.spec-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
.spec{background:#f8fafc;border:1px solid #e5e7eb;border-radius:10px;padding:10px;font-size:13px}
.price{font-weight:900;color:#0b1220}
.progress{height:8px;background:#eef2ff;border-radius:999px;overflow:hidden}
.progress>span{display:block;height:100%;background:linear-gradient(90deg,#0ea5e9,#7c3aed)}
@media (max-width:900px){ .fix-grid{grid-template-columns:1fr} .info-row{grid-template-columns:1fr} }

/* Icon circles (Buyer/Seller/etc) */
.icon{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:999px;background:#fff;color:#111;border:1px solid #e5e7eb}
.icon.buyer{background:#dcfce7;border-color:#a7f3d0}
.icon.seller{background:#fee2e2;border-color:#fecaca}
.icon.api{background:#e0e7ff;border-color:#c7d2fe}
.icon.server{background:#fef9c3;border-color:#fde68a}
.icon.cache{background:#e0f2fe;border-color:#bae6fd}
</style>
</head>

<body>
<!-- ===== Top Navigation ===== -->
<div class="topnav">
  <div class="nav-inner">
    <div class="brand">
      <img class="logo-img" src="Untitled-9-01.png" alt="E-Buyur Logo"/>
    </div>
    <div class="tabs">
      <button class="tab-btn active" data-target="#view-roadmap">Roadmap</button>
      <button class="tab-btn" data-target="#view-perbaikan">Perbaikan</button>
    </div>
    <div class="right-actions">
      <button class="print-button" onclick="window.print()">ğŸ“„ Cetak PDF</button>
    </div>
  </div>
</div>

<!-- ========================= ROADMAP VIEW ========================= -->
<div id="view-roadmap" class="view active">
  <!-- ================= PAGE 1 ================= -->
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo"><img class="logo-img" src="Untitled-9-01.png" alt="E-Buyur Logo"/></div>
      <h1>E-BUYUR PROJECT ROADMAP</h1>
      <div class="subtitle">Marketplace Sayuran Segar â€¢ Laravel + Flutter + TFLite â€¢ Hypercloud</div>
      <div class="date-range">ğŸ“… September 2025 â†’ Presentasi Awal Oktober</div>
    </div>

    <!-- DoD -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">ğŸ¯</span>Definition of Done (Target Presentasi)</h2>
      <div class="dod-box">
        <div class="dod-title">Sasaran Akhir â€“ â€œSiap Demo Awal Oktoberâ€</div>
        <ul class="dod-list">
          <li>Backend Laravel hosted di Hypercloud (domain aktif + HTTPS Letâ€™s Encrypt), <em>APP_URL</em> benar.</li>
          <li>Database migrasi berjalan; backup harian otomatis + verifikasi pemulihan.</li>
          <li>Aplikasi Flutter (buyer & seller) terhubung ke server online (base URL via <code>--dart-define</code>).</li>
          <li>Login/register/role buyerâ€“seller selesai; routing dashboard sesuai role.</li>
          <li>Integrasi ML TFLite on-device: klasifikasi jenis (softmax) + % kelayakan (sigmoid). Threshold default 70% (admin dapat kalibrasi 65â€“80%).</li>
          <li>Batch Scan (prioritas): scan beruntun â†’ simpan draf lokal â†’ post massal (commit).</li>
          <li>Perbaikan inti: gambar produk tampil (Storage::url, symlink), cart & favorites per-user (limit 100), pencarian buyer global & seller scoped, â€œKelola Produk/Tokoâ€ ter-scope seller.</li>
          <li>Stabil: session DB (SESSION_DRIVER=database) + Sanctum + CORS (stateful domains) berfungsi.</li>
          <li>QA dasar untuk alur utama (browse â†’ cart/fav â†’ checkout dummy; batch scan â†’ commit).</li>
          <li>Dokumentasi & materi presentasi: arsitektur, data flow ML, demo path (rekaman), runbook deploy & recovery.</li>
        </ul>
        <div class="small-note">Catatan: hardening dasar (APP_KEY, rate limit login, exception logging) aktif.</div>
      </div>
    </div>

    <!-- Kalender Jadwal -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">ğŸ“†</span>Kalender Jadwal â€” September 2025</h2>
      <div class="calendar">
        <div class="cal-header">
          <div class="cal-title">September 2025</div>
          <div class="cal-legend">
            <span class="legend-dot"><i class="i-erik"></i> Erik</span>
            <span class="legend-dot"><i class="i-devin"></i> Devin</span>
            <span class="legend-dot"><i class="i-qa"></i> QA/UAT</span>
            <span class="legend-dot"><i class="i-milestone"></i> Milestone</span>
          </div>
        </div>
        <div id="cal-grid" class="cal-grid"></div>
      </div>
      <div class="small-note" style="margin-top:8px">
        Tip: Arahkan kursor/ketuk tanggal untuk melihat detail tugas. Warna/titik menunjukkan penanggung jawab. (Erik lead hadir tiap hari)
      </div>

      <!-- Kilas Peran (Grafik) -->
      <div class="role-box">
        <div class="role-hdr">
          <div class="title">Kilas Peran (Mingguan)</div>
          <div id="kpi" class="kpi"></div>
        </div>
        <div class="role-chart">
          <svg id="role-svg" viewBox="0 0 800 260" preserveAspectRatio="xMidYMid meet"></svg>
        </div>
        <div class="role-legend">
          <span><span class="dot" style="background:var(--brand-green)"></span>Erik</span>
          <span><span class="dot" style="background:var(--brand-orange)"></span>Devin</span>
          <span><span class="dot" style="background:var(--blue)"></span>QA/UAT</span>
          <span><span class="dot" style="background:var(--violet)"></span>Milestone</span>
        </div>
      </div>
    </div>

    <!-- Timeline (rinci) -->
    <div class="section">
      <h2 class="section-title"><span class="section-icon">ğŸ“…</span>Timeline September 2025</h2>

      <!-- WEEK 1 -->
      <div class="timeline">
        <div class="week no-break">
          <div class="week-header">
            <span class="week-title">Minggu 1 â€” 1â€“7 Sep â€¢ Stabilisasi & Fondasi Hosting</span>
            <span class="week-dates">1â€“7 Sep</span>
          </div>
          <div class="week-content">
            <div class="week-objective"><strong>Tujuan:</strong> fondasi beres & server siapâ€”aplikasi stabil dasar.</div>
            <div class="task-grid">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 1â€“2 Sep</div>
                <ul class="task-list">
                  <li>Gambar produk: gunakan <code>Storage::url()</code>, jalankan <code>php artisan storage:link</code>.</li>
                  <li>Session ke DB: <code>SESSION_DRIVER=database</code> + <code>php artisan session:table</code> + migrate.</li>
                  <li>Sanctum & CORS: <code>SANCTUM_STATEFUL_DOMAINS</code> (localhost, 127.0.0.1, 192.168.1.*), <code>SESSION_DOMAIN=null</code>.</li>
                  <li>Hardening: set <code>APP_KEY</code>, rate limit login, aktifkan logging exception.</li>
                </ul>
                <div class="ac-title">Acceptance</div>
                <ul class="ac-list">
                  <li>Gambar tampil di listing & detail.</li>
                  <li>Session persist via DB; multi-tab aman.</li>
                  <li>Flutter web bisa auth via Sanctum (CORS OK).</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 1â€“2 Sep</div>
                <ul class="task-list">
                  <li>Android konsisten: <code>applicationId</code> â†” <code>AndroidManifest</code> â†” <code>MainActivity.kt</code>.</li>
                  <li>Konfigurasi base URL via <code>--dart-define=API_BASE=...</code> (dev/staging/prod).</li>
                </ul>
                <div class="ac-title">Acceptance</div>
                <ul class="ac-list">
                  <li>Build debug/release menggunakan endpoint yang benar.</li>
                  <li>Login â†’ fetch katalog sukses di staging.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 3â€“4 Sep</div>
                <ul class="task-list">
                  <li>Provision Hypercloud VM, UFW, SSH key.</li>
                  <li>Install Nginx + PHP-FPM + DB; Redis opsional.</li>
                  <li>CI/CD (GitHub Actions â†’ deploy via SSH/rsync).</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 3â€“4 Sep</div>
                <ul class="task-list">
                  <li>Cart per-user (limit 100).</li>
                  <li>Favorites per-user (limit 100).</li>
                  <li>Routing role: buyer vs seller dashboard.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 5 Sep</div>
                <ul class="task-list">
                  <li>Domain + HTTPS (Letâ€™s Encrypt), update <code>APP_URL</code>.</li>
                  <li>DB migrate & seed minimal.</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 5â€“6 Sep</div>
                <ul class="task-list">
                  <li>â€œKelola Produk/Tokoâ€ scope seller_id=auth.</li>
                  <li>Pencarian: buyer global, seller scoped.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column" style="grid-column:1 / -1">
                <div class="task-owner">ğŸ‘¥ 7 Sep â€” Smoke Test</div>
                <ul class="task-list">
                  <li>End-to-end (web + Android fisik) & catat bug P0/P1.</li>
                </ul>
              </div>
            </div>

            <div class="output-box"><strong>Output Minggu 1:</strong> server staging online, app stabil dasar, daftar bug prioritas tersusun.</div>
          </div>
        </div>

        <!-- WEEK 2 -->
        <div class="week no-break">
          <div class="week-header">
            <span class="week-title">Minggu 2 â€” 8â€“14 Sep â€¢ Integrasi ML + Batch Scan v1</span>
            <span class="week-dates">8â€“14 Sep</span>
          </div>
          <div class="week-content">
            <div class="week-objective"><strong>Tujuan:</strong> TFLite on-device aktif + batch scan draft â†’ post.</div>
            <div class="task-grid">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 8â€“9 Sep</div>
                <ul class="task-list">
                  <li>Endpoint admin: kalibrasi threshold (65â€“80%).</li>
                  <li>API metadata model (versi/updated_at/threshold).</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 8â€“10 Sep</div>
                <ul class="task-list">
                  <li>Integrasi TFLite FP16; tampilkan label + probabilitas.</li>
                  <li>Badge â€œLayakâ€ â‰¥ threshold; fallback error tips.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 10â€“12 Sep (Batch Scan v1)</div>
                <ul class="task-list">
                  <li>Mode â€œScan Beruntunâ€ â†’ draf lokal (gambar, label, %).</li>
                  <li>Tinjau draf â†’ Commit massal.</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 11â€“12 Sep</div>
                <ul class="task-list">
                  <li>API <code>/batch/drafts</code> (opsional) & <code>/batch/commit</code> + policy ownership.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column" style="grid-column:1 / -1">
                <div class="task-owner">ğŸ‘¥ 13â€“14 Sep â€” Uji Lapangan</div>
                <ul class="task-list">
                  <li>Android + HTTPS; optimasi kamera & inferensi.</li>
                </ul>
              </div>
            </div>

            <div class="output-box"><strong>Output Minggu 2:</strong> ML live + Batch Scan v1 siap dipakai seller.</div>
          </div>
        </div>

        <!-- WEEK 3 -->
        <div class="week no-break">
          <div class="week-header">
            <span class="week-title">Minggu 3 â€” 15â€“21 Sep â€¢ Offline Ringan, Audit Trail, Hardening</span>
            <span class="week-dates">15â€“21 Sep</span>
          </div>
          <div class="week-content">
            <div class="week-objective"><strong>Tujuan:</strong> nilai jual + keamanan & ketahanan.</div>
            <div class="task-grid">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 15â€“17 Sep (Offline Ringan)</div>
                <ul class="task-list">
                  <li>Cache katalog 24 jam & local queue transaksi (retry).</li>
                  <li>UI indikator koneksi & sinkronisasi.</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 15â€“16 Sep (Audit Trail)</div>
                <ul class="task-list">
                  <li>Tabel <code>product_audits</code> + halaman histori.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 18â€“19 Sep (Produksi)</div>
                <ul class="task-list">
                  <li>Env prod, backup otomatis, monitoring.</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 18â€“19 Sep (UX/Perf)</div>
                <ul class="task-list">
                  <li>Polish UI/UX; pagination; debounced search.</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column" style="grid-column:1 / -1">
                <div class="task-owner">ğŸ‘¥ 20â€“21 Sep â€” UAT Siklus 1</div>
                <ul class="task-list">
                  <li>Buyer: browse â†’ cart â†’ checkout dummy; Seller: batch scan â†’ commit.</li>
                </ul>
              </div>
            </div>

            <div class="output-box"><strong>Output Minggu 3:</strong> offline ringan & audit trail aktif, produksi siap, UAT-1 selesai.</div>
          </div>
        </div>

        <!-- WEEK 4 -->
        <div class="week no-break">
          <div class="week-header">
            <span class="week-title">Minggu 4 â€” 22â€“30 Sep â€¢ Stabilisasi Akhir, Dokumentasi, Dress Rehearsal</span>
            <span class="week-dates">22â€“30 Sep</span>
          </div>
          <div class="week-content">
            <div class="week-objective"><strong>Tujuan:</strong> feature freeze; fokus kualitas & materi presentasi.</div>
            <div class="task-grid">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik â€” 22â€“24 Sep</div>
                <ul class="task-list">
                  <li>Rate limit, validasi, pagination, index DB; SOP recovery.</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Devin â€” 22â€“24 Sep</div>
                <ul class="task-list">
                  <li>Polish Batch Scan: seleksi massal, hapus draf, progress commit; slider threshold (view).</li>
                </ul>
              </div>
            </div>

            <div class="task-grid" style="margin-top:12px">
              <div class="task-column">
                <div class="task-owner">ğŸ‘¥ 25â€“27 Sep â€” UAT Siklus 2</div>
                <ul class="task-list">
                  <li>Perf ringan; simulasi jaringan lemah & kamera.</li>
                </ul>
              </div>
              <div class="task-column">
                <div class="task-owner">ğŸ‘¨â€ğŸ’» Erik & Devin â€” 28â€“30 Sep</div>
                <ul class="task-list">
                  <li>Freeze kode v1.0 + changelog + runbook; materi presentasi & buffer P0.</li>
                </ul>
              </div>
            </div>

            <div class="output-box"><strong>Output Minggu 4:</strong> rilis stabil v1.0 + dokumen lengkap + materi presentasi siap.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= PAGE 2 ================= -->
  <div class="container page-break">
    <!-- Team -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">ğŸ‘¥</span>Pembagian Tanggung Jawab</h2>
      <div class="team-grid">
        <div class="team-member">
          <div class="member-name">Erik</div>
          <div class="member-role">Lead Backend â€¢ DevOps â€¢ ML Integration</div>
          <ul class="responsibility-list">
            <li>Laravel infra: storage (symlink), sessions (DB), Sanctum/CORS (stateful domains).</li>
            <li>Hypercloud: provisioning, Nginx/PHP-FPM, domain+HTTPS, CI/CD, backup & monitoring.</li>
            <li>API: batch commit, settings threshold, audit trail, pencarian buyer global/seller scoped.</li>
            <li>Keamanan/kinerja: rate limit, pagination, indexing DB.</li>
            <li>Dokumentasi backend: contoh <code>.env</code>, migrasi DB, runbook deploy, disaster recovery.</li>
            <li>Materi presentasi: arsitektur, data flow ML, hasil uji.</li>
          </ul>
        </div>
        <div class="team-member">
          <div class="member-name">Devin</div>
          <div class="member-role">Mobile/Web Flutter â€¢ UX</div>
          <ul class="responsibility-list">
            <li>Konsistensi package Android & base URL (<code>--dart-define</code>).</li>
            <li>Cart/Favorites per-user (limit 100), buyer & seller dashboard.</li>
            <li>Integrasi TFLite (load model, inferensi, UI hasil & threshold badge).</li>
            <li>Batch Scan (scan beruntun â†’ draf â†’ commit), penyimpanan draf lokal.</li>
            <li>Offline ringan (cache katalog + local queue), status koneksi & sinkronisasi.</li>
            <li>Polishing UI/UX, skeleton/loading/error handling, performance list.</li>
            <li>Materi presentasi: rekaman alur buyer & seller.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Priorities -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">â­</span>Prioritas Fitur</h2>
      <div class="priority-list">
        <div class="priority-item"><div class="priority-number">1</div><div class="priority-text"><strong>Batch Scan:</strong> fitur utama seller untuk scan massal â†’ draf â†’ commit.</div></div>
        <div class="priority-item"><div class="priority-number">2</div><div class="priority-text"><strong>Integrasi ML:</strong> TFLite on-device (FP16, XNNPACK) klasifikasi jenis + kelayakan.</div></div>
        <div class="priority-item"><div class="priority-number">3</div><div class="priority-text"><strong>Hosting Stabil:</strong> Hypercloud + HTTPS + backup teruji.</div></div>
        <div class="priority-item"><div class="priority-number">4</div><div class="priority-text"><strong>Offline Ringan:</strong> cache katalog 24 jam & antre transaksi (retry).</div></div>
        <div class="priority-item"><div class="priority-number">5</div><div class="priority-text"><strong>Audit Trail:</strong> rekam perubahan harga/stock untuk akuntabilitas.</div></div>
      </div>
    </div>

    <!-- Gaps / Must Add -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">ğŸ§©</span>Yang Masih Kurang & Wajib Ditambahkan</h2>
      <div class="dod-box">
        <ul class="dod-list">
          <li>Hosting produksi Hypercloud + domain + HTTPS + backup â€” <strong>terjadwal Minggu 1â€“3</strong>.</li>
          <li>Integrasi ML on-device (TFLite) + UI + threshold dinamis â€” <strong>Minggu 2</strong>.</li>
          <li>Batch Scan lengkap drafâ†’commit + simpan lokal â€” <strong>Minggu 2</strong> & polish <strong>Minggu 4</strong>.</li>
          <li>Cart/Favorites per-user (limit 100) â€” <strong>Minggu 1</strong>.</li>
          <li>Role & scoping seller di semua CRUD â€” <strong>Minggu 1</strong>.</li>
          <li>Pencarian buyer global, seller scoped â€” <strong>Minggu 1</strong>.</li>
          <li>Offline ringan & antre transaksi â€” <strong>Minggu 3</strong>.</li>
          <li>Audit trail harga/stock â€” <strong>Minggu 3</strong>.</li>
          <li>QA/UAT & dokumentasi presentasi â€” <strong>Minggu 3â€“4</strong>.</li>
        </ul>
        <div class="small-note"><em>Nice-to-have:</em> object storage S3-compatible; telemetri ringan; dark mode/polish visual.</div>
      </div>
    </div>

    <!-- Risks -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">âš ï¸</span>Manajemen Risiko & Mitigasi</h2>
      <div class="risk-grid">
        <div class="risk-item">
          <div class="risk-title">ğŸ¥ Kamera Web butuh HTTPS</div>
          <div class="risk-mitigation"><strong>Mitigasi:</strong> Prioritaskan Android fisik untuk demo; gunakan staging HTTPS/ngrok untuk uji web.</div>
        </div>
        <div class="risk-item">
          <div class="risk-title">ğŸŒ Latensi Mobile â†’ Cloud</div>
          <div class="risk-mitigation"><strong>Mitigasi:</strong> Cache katalog; retry local queue; pagination & debounce.</div>
        </div>
        <div class="risk-item">
          <div class="risk-title">ğŸ” Kebocoran Role/Policy</div>
          <div class="risk-mitigation"><strong>Mitigasi:</strong> Unit test policy; middleware ownership; audit trail.</div>
        </div>
        <div class="risk-item">
          <div class="risk-title">ğŸ“± Kinerja ML di Perangkat Low-end</div>
          <div class="risk-mitigation"><strong>Mitigasi:</strong> TFLite FP16 + XNNPACK; resize input; batasi resolusi kamera.</div>
        </div>
        <div class="risk-item">
          <div class="risk-title">ğŸª CORS/Sanctum Cookie</div>
          <div class="risk-mitigation"><strong>Mitigasi:</strong> Pastikan <code>SANCTUM_STATEFUL_DOMAINS</code> & <code>SESSION_DOMAIN</code> konsisten; fallback token untuk mobile.</div>
        </div>
      </div>
    </div>

    <!-- Quick Reference -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">ğŸ“‹</span>Ringkasan Praktis & Checkpoints</h2>
      <div class="dod-box">
        <div class="dod-title">Cheatsheet Tim</div>
        <ul class="dod-list">
          <li><strong>Target â€œSiapâ€:</strong> 28â€“30 Sep code-freeze + materi presentasi â†’ Awal Okt uji & presentasi.</li>
          <li><strong>Prioritas:</strong> Batch Scan â†’ Integrasi ML â†’ Hosting stabil â†’ Offline ringan â†’ Audit trail.</li>
          <li><strong>Ritual:</strong> stand-up harian 15 menit; sync Selasa & Jumat; UAT Minggu 3 & 4.</li>
          <li><strong>Milestone:</strong> rilis v1.0 tanggal 28 Sep.</li>
        </ul>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p><strong>E-Buyur Project</strong> â€” Marketplace Sayuran Segar dengan ML Classification</p>
      <p>September 2025 Development Roadmap â€¢ Version 1.0</p>
    </div>
  </div>
</div>

<!-- ========================= PERBAIKAN VIEW ========================= -->
<div id="view-perbaikan" class="view">
  <div class="container">
    <div class="header" style="background:linear-gradient(135deg,#0ea5e9 0%,#7c3aed 100%)">
      <div class="logo"><img class="logo-img" src="Untitled-9-01.png" alt="E-Buyur"/></div>
      <h1>Rencana Perbaikan</h1>
      <div class="subtitle">Non-Teknis (Buyer & Seller) â€¢ Teknis (API, Server, Cache)</div>
      <div class="date-range">ğŸ“‹ Kompilasi + Jadwal â€¢ September 2025</div>
    </div>

    <!-- Filter & Search -->
    <div class="section">
      <div class="info-row">
        <div class="kpi-card"><div class="big" id="kpi-total">0</div><div class="label">Total Item Perbaikan</div></div>
        <div class="kpi-card" style="background:#14532d"><div class="big" id="kpi-buyer">0</div><div class="label">Buyer</div></div>
        <div class="kpi-card" style="background:#7c2d12"><div class="big" id="kpi-seller">0</div><div class="label">Seller & Teknis</div></div>
      </div>
      <div class="filter-chips">
        <span class="chip active" data-filter="ALL">Semua</span>
        <span class="chip" data-filter="Buyer"><span class="icon buyer">ğŸ›’</span>Buyer</span>
        <span class="chip" data-filter="Seller"><span class="icon seller">ğŸ§‘â€ğŸŒ¾</span>Seller</span>
        <span class="chip" data-filter="Teknis"><span class="icon api">âš™ï¸</span>Teknis</span>
      </div>
      <div class="searchbar">
        <input id="fix-search" type="search" placeholder="Cari perbaikan (mis. â€˜pencarianâ€™, â€˜Midtransâ€™, â€˜profilâ€™)â€¦"/>
      </div>
    </div>

    <!-- Kalender Perbaikan + Kilas Peran -->
    <div class="section no-break">
      <h2 class="section-title"><span class="section-icon">ğŸ“†</span>Kalender Perbaikan â€” September 2025</h2>
      <div class="calendar">
        <div class="cal-header">
          <div class="cal-title">September 2025</div>
          <div class="cal-legend">
            <span class="legend-dot"><i class="i-erik"></i> Erik</span>
            <span class="legend-dot"><i class="i-devin"></i> Devin</span>
          </div>
        </div>
        <div id="fix-cal-grid" class="cal-grid"></div>
      </div>

      <div class="role-box">
        <div class="role-hdr">
          <div class="title">Kilas Peran Perbaikan (Mingguan)</div>
          <div id="fix-kpi-roles" class="kpi"></div>
        </div>
        <div class="role-chart"><svg id="fix-role-svg" viewBox="0 0 800 220" preserveAspectRatio="xMidYMid meet"></svg></div>
        <div class="role-legend" style="padding:0 14px 12px">
          <span><span class="dot" style="background:var(--brand-green);width:10px;height:10px;border-radius:999px;display:inline-block;margin-right:6px"></span>Erik</span>
          <span><span class="dot" style="background:var(--brand-orange);width:10px;height:10px;border-radius:999px;display:inline-block;margin-right:6px"></span>Devin</span>
        </div>
      </div>
    </div>

    <!-- Daftar Perbaikan (dengan ikon section) -->
    <div class="section">
      <h2 class="section-title"><span class="section-icon">ğŸ› ï¸</span>Daftar Perbaikan</h2>
      <div id="fix-root" class="fix-grid"></div>
    </div>

    <!-- Budget Server -->
    <div class="section">
      <h2 class="section-title"><span class="section-icon">ğŸ’¸</span>Estimasi Biaya Server & Domain</h2>
      <div class="spec-grid">
        <div class="spec">
          <div class="badge-cat">Hypercloud â€“ Cloud Plus</div>
          <ul class="fix-list" style="margin-top:6px">
            <li>6 Core CPU â€¢ 10 GB RAM â€¢ SSD 50 GB</li>
            <li>Unlimited Bandwidth â€¢ Gratis Unlimited SSL</li>
            <li>Proteksi DDoS â€¢ Unlimited Addon Domain â€¢ Backup Mingguan</li>
            <li>Unlimited Email â€¢ Unlimited MySQL Database</li>
          </ul>
        </div>
        <div class="spec">
          <div class="badge-cat">Perkiraan Biaya</div>
          <div style="margin-top:8px;display:grid;gap:6px">
            <div>Cloud Hosting: <span class="price">Rp 110.000/bulan</span></div>
            <div>Domain .com: <span class="price">Rp 200.000/tahun</span></div>
            <div class="progress" title="3 bulan sewa + 1 domain"><span style="width:100%"></span></div>
            <div><strong>Total 3 bulan + domain:</strong> <span class="price" id="biaya-total">Rp 530.000</span></div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p><strong>E-Buyur</strong> â€” Rencana Perbaikan UI/UX & Teknis</p>
    </div>
  </div>
</div>

<!-- =================== SCRIPTS =================== -->
<script>
/* Print title */
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.querySelector('.print-button');
  if (btn) btn.addEventListener('click', () => {
    const ts = new Date().toISOString().slice(0,10);
    document.title = `E-Buyur_Roadmap_${ts}`;
  });
});

/* Logo fallback if not found */
document.querySelectorAll('.logo-img').forEach(img=>{
  img.addEventListener('error', function(){
    if(this.src.includes('logo-ebuyur.png')){ // fallback terakhir SVG
      const svg = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='340' height='90'><rect width='100%' height='100%' fill='black'/><text x='50%' y='55%' fill='white' font-size='28' font-family='Inter' text-anchor='middle' font-weight='800'>E-BUYUR MARKET</text></svg>`);
      this.src = 'data:image/svg+xml;charset=UTF-8,'+svg;
      return;
    }
    this.src = 'logo-ebuyur.png'; // fallback kedua (nama lama)
  }, {once:true});
});

/* Tabs */
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
    document.querySelector(btn.dataset.target).classList.add('active');
    window.scrollTo({top:0,behavior:'smooth'});
  });
});

/* ========= ROADMAP DATA ========= */
const EVENTS = [
  // Minggu 1
  {d:'2025-09-01', t:'erik',  label:'Storage, sessions, Sanctum/CORS'},
  {d:'2025-09-01', t:'devin', label:'Android package & base URL'},
  {d:'2025-09-02', t:'erik',  label:'Hardening & logging'},
  {d:'2025-09-02', t:'devin', label:'Endpoint base URL build'},
  {d:'2025-09-03', t:'erik',  label:'Provision Hypercloud & stack'},
  {d:'2025-09-03', t:'devin', label:'Cart/Favorites per-user'},
  {d:'2025-09-04', t:'erik',  label:'CI/CD & .env.staging'},
  {d:'2025-09-04', t:'devin', label:'Routing role'},
  {d:'2025-09-05', t:'erik',  label:'Domain + HTTPS; APP_URL'},
  {d:'2025-09-05', t:'devin', label:'Scope Kelola Produk/Toko'},
  {d:'2025-09-06', t:'devin', label:'Pencarian buyer/seller'},
  {d:'2025-09-07', t:'qa',    label:'Smoke test end-to-end'},
  // Minggu 2
  {d:'2025-09-08', t:'erik',  label:'Threshold settings API'},
  {d:'2025-09-08', t:'devin', label:'Integrasi TFLite FP16'},
  {d:'2025-09-09', t:'erik',  label:'Model metadata endpoint'},
  {d:'2025-09-09', t:'devin', label:'UI hasil inferensi'},
  {d:'2025-09-10', t:'devin', label:'Batch Scan v1: scan â†’ draf'},
  {d:'2025-09-11', t:'erik',  label:'/batch/commit API + policy'},
  {d:'2025-09-12', t:'devin', label:'Draf lokal & review'},
  {d:'2025-09-13', t:'qa',    label:'Uji lapangan Android'},
  {d:'2025-09-14', t:'qa',    label:'Optimasi kamera & inferensi'},
  // Minggu 3
  {d:'2025-09-15', t:'devin', label:'Offline: cache katalog'},
  {d:'2025-09-16', t:'erik',  label:'Audit trail schema'},
  {d:'2025-09-17', t:'devin', label:'Local queue transaksi'},
  {d:'2025-09-18', t:'erik',  label:'Setup produksi + monitoring'},
  {d:'2025-09-19', t:'devin', label:'UX polish, perf list'},
  {d:'2025-09-20', t:'qa',    label:'UAT siklus 1 (buyer/seller)'},
  {d:'2025-09-21', t:'qa',    label:'Bug triage P0/P1/P2'},
  // Minggu 4
  {d:'2025-09-22', t:'erik',  label:'Security & performance'},
  {d:'2025-09-23', t:'devin', label:'Polish Batch Scan'},
  {d:'2025-09-24', t:'erik',  label:'Indexing DB & SOP recovery'},
  {d:'2025-09-25', t:'qa',    label:'UAT siklus 2'},
  {d:'2025-09-26', t:'qa',    label:'Stress kecil & jaringan lemah'},
  {d:'2025-09-27', t:'qa',    label:'Fix & verifikasi'},
  {d:'2025-09-28', t:'milestone', label:'Freeze v1.0 + changelog'},
  {d:'2025-09-29', t:'milestone', label:'Materi presentasi & buffer'},
  {d:'2025-09-30', t:'milestone', label:'Rehearsal & perbaikan P0'},
];

/* Pastikan ada Erik setiap hari (lead) */
(function enforceErikLead(){
  const start = new Date('2025-09-01'), end = new Date('2025-09-30');
  for(let d=new Date(start); d<=end; d.setDate(d.getDate()+1)){
    const ds = d.toISOString().slice(0,10);
    const today = EVENTS.filter(e=>e.d===ds);
    if(!today.length) EVENTS.push({d:ds,t:'erik',label:'Leadership oversight'});
    else if(!today.some(e=>e.t==='erik')) EVENTS.push({d:ds,t:'erik',label:'Lead review & unblock'});
  }
})();

/* Calendar builder (shared) */
const colorMap = {erik:'var(--brand-green)', devin:'var(--brand-orange)', qa:'var(--blue)', milestone:'var(--violet)'};
function buildCalendar(gridId, events, year, monthIdx){
  const grid = document.getElementById(gridId);
  grid.innerHTML = '';
  const dayNames = ['Sen','Sel','Rab','Kam','Jum','Sab','Min'];
  dayNames.forEach(n=>{ const dn=document.createElement('div'); dn.className='cal-dayname'; dn.textContent=n; grid.appendChild(dn); });
  const first = new Date(year, monthIdx, 1);
  const firstDow = (first.getDay()+6)%7; // Mon=0
  const start = new Date(year, monthIdx, 1-firstDow);

  for(let i=0;i<42;i++){
    const d = new Date(start); d.setDate(start.getDate()+i);
    const cell = document.createElement('div'); cell.className='cal-cell';
    if(d.getMonth()!==monthIdx) cell.classList.add('muted');
    const ds = d.toISOString().slice(0,10), dn = d.getDate();

    const dateEl = document.createElement('div'); dateEl.className='cal-date'; dateEl.textContent=dn; cell.appendChild(dateEl);

    const todays = events.filter(e=>e.d===ds);
    if(todays.length){
      cell.classList.add('cal-has');
      const dots = document.createElement('div'); dots.className='cal-dots';
      todays.forEach(ev=>{ const dot=document.createElement('span'); dot.style.background=colorMap[ev.t]||'#111'; dots.appendChild(dot); });
      cell.appendChild(dots);

      const pop=document.createElement('div'); pop.className='cal-pop';
      pop.innerHTML = todays.map(ev=>{
        const role = ev.t.charAt(0).toUpperCase()+ev.t.slice(1);
        return `<span class="badge ${ev.t}" style="background:${colorMap[ev.t]};margin-right:6px;">${role}</span> ${ev.label}`;
      }).join('<br/>');
      cell.appendChild(pop);
    }
    grid.appendChild(cell);
  }
}
buildCalendar('cal-grid', EVENTS, 2025, 8);

/* KPI + Role (Roadmap) */
function within(dateStr, start, end){ const d=new Date(dateStr); return d>=start && d<=end; }
function countByRole(events, start, end){
  const roles={erik:0,devin:0,qa:0,milestone:0};
  events.forEach(ev=>{ if(within(ev.d,start,end)) roles[ev.t]=(roles[ev.t]||0)+1; });
  return roles;
}
function drawRoleBars(svgId, weekly){
  const svg=document.getElementById(svgId); while(svg.firstChild) svg.removeChild(svg.firstChild);
  const width=800,height=svgId==='fix-role-svg'?220:260,left=140,right=24,top=20,rowH=38,gap=14;
  svg.setAttribute('viewBox',`0 0 ${width} ${height}`);
  const bg=document.createElementNS('http://www.w3.org/2000/svg','rect');
  bg.setAttribute('x','0');bg.setAttribute('y','0');bg.setAttribute('width',width);bg.setAttribute('height',height);bg.setAttribute('fill','#fff');svg.appendChild(bg);
  const maxVal=Math.max(...weekly.map(w=>w.erik+w.devin))||1, usable=width-left-right, scale=usable/maxVal;
  weekly.forEach((w,i)=>{
    const y=top+i*(rowH+gap);
    const tl=document.createElementNS('http://www.w3.org/2000/svg','text');
    tl.setAttribute('x',left-10);tl.setAttribute('y',y+18);tl.setAttribute('fill','#111827');tl.setAttribute('font-size','12');tl.setAttribute('text-anchor','end');tl.textContent=w.label;svg.appendChild(tl);
    const eW=w.erik*scale, dW=w.devin*scale;
    const r1=document.createElementNS('http://www.w3.org/2000/svg','rect');
    r1.setAttribute('x',left);r1.setAttribute('y',y);r1.setAttribute('width',Math.max(0,eW));r1.setAttribute('height',18);r1.setAttribute('fill','var(--brand-green)');r1.setAttribute('rx','6');svg.appendChild(r1);
    const r2=document.createElementNS('http://www.w3.org/2000/svg','rect');
    r2.setAttribute('x',left+eW+(dW>0?2:0));r2.setAttribute('y',y);r2.setAttribute('width',Math.max(0,dW));r2.setAttribute('height',18);r2.setAttribute('fill','var(--brand-orange)');r2.setAttribute('rx','6');svg.appendChild(r2);
    const tt=document.createElementNS('http://www.w3.org/2000/svg','text');
    tt.setAttribute('x',left+Math.min(usable-50,Math.max(60,(eW+dW)/2))); tt.setAttribute('y',y+14);
    tt.setAttribute('fill','#1f2937');tt.setAttribute('font-size','11');tt.textContent=`Erik ${w.erik} â€¢ Devin ${w.devin}`;svg.appendChild(tt);
  });
}
const WEEKS = [
  { label:'Minggu 1 (1â€“7)',   start:new Date('2025-09-01'), end:new Date('2025-09-07') },
  { label:'Minggu 2 (8â€“14)',  start:new Date('2025-09-08'), end:new Date('2025-09-14') },
  { label:'Minggu 3 (15â€“21)', start:new Date('2025-09-15'), end:new Date('2025-09-21') },
  { label:'Minggu 4 (22â€“30)', start:new Date('2025-09-22'), end:new Date('2025-09-30') }
];
const weeklyRM = WEEKS.map(w=>({label:w.label, ...countByRole(EVENTS,w.start,w.end)}));
const totalsRM = weeklyRM.reduce((a,w)=>({erik:a.erik+w.erik,devin:a.devin+w.devin,qa:a.qa+w.qa,milestone:a.milestone+w.milestone}),{erik:0,devin:0,qa:0,milestone:0});
document.getElementById('kpi').innerHTML = `
  <span class="pill erik">Erik: ${totalsRM.erik}</span>
  <span class="pill devin">Devin: ${totalsRM.devin}</span>
  <span class="pill qa">QA/UAT: ${totalsRM.qa}</span>
  <span class="pill milestone">Milestone: ${totalsRM.milestone}</span>`;
drawRoleBars('role-svg', weeklyRM);

/* ========= PERBAIKAN DATA ========= */
const FIXES = [
  {group:'Buyer', section:'Beranda', icon:'ğŸ ', items:[
    'Bug product card (bottom overflowed by 3.9 pixels)',
    'Bug pencarian',
    'Menambahkan tampilan ulasan pada detail produk (di atas rekomendasi)'
  ]},
  {group:'Buyer', section:'Pencarian', icon:'ğŸ”', items:[
    'Bedakan tampilan pada menu pencarian agar tidak seperti beranda',
    'Memaksimalkan filtering (jenis, harga, % kelayakan, jarak)'
  ]},
  {group:'Buyer', section:'Keranjang', icon:'ğŸ§º', items:[
    'Navigasi checkout (validasi pembelian, alamat, pembayaran, kurir)',
    'Modifikasi tampilan keranjang'
  ]},
  {group:'Buyer', section:'Riwayat Pembelian', icon:'ğŸ§¾', items:[
    'Integrasikan konfirmasi (diproses, dikirim, selesai) by id',
    'Saat selesai ada menu memberi ulasan dan beli lagi',
    'Detail Riwayat pembelian dengan roadmap'
  ]},
  {group:'Buyer', section:'Profil Buyer', icon:'ğŸ‘¤', items:[
    'Integrasikan user id ke profil (nama, email, no hp, dll)',
    'Integrasikan jumlah produk di keranjang & favorit by id, tampilkan di profil',
    'Hilangkan rating di profil',
    'Perbaiki navigasi edit profil'
  ]},
  {group:'Seller', section:'Beranda', icon:'ğŸª', items:[
    'Integrasikan pendapatan bulanan total',
    'Kuantitas pesanan realtime (stok & produk by id seller)',
    'Kesegaran (rata-rata kelayakan keseluruhan)',
    'Produk terbaru (by id seller)'
  ]},
  {group:'Seller', section:'Kelola Produk', icon:'ğŸ—ƒï¸', items:[
    'Total inventori (harga x stok)',
    'Perbaiki filtering',
    'Integrasi produk by id untuk dikelola',
    'Detail produk (edit stok, nama, nutrisi, deskripsi)',
    'Hapus produk'
  ]},
  {group:'Seller', section:'Scan Produk', icon:'ğŸ“·', items:[
    'Perbaiki animasi â€œanalyzingâ€',
    'Rincian & analisis tambahan',
    'Integrasi prediksi objek & kualitas (numerik & kategorikal)',
    'Create product: enumerasi nutrisi umum + bisa isi manual'
  ]},
  {group:'Seller', section:'Riwayat Penjualan', icon:'ğŸ“ˆ', items:[
    'Orderan, diproses, selesai, dibatalkan',
    'Detail pesanan: konfirmasi, terima, teruskan'
  ]},
  {group:'Seller', section:'Profil Seller', icon:'ğŸ§‘â€ğŸŒ¾', items:[
    'Identitas by id seller (pribadi & toko)',
    'Integrasi identitas seller ke tampilan profil'
  ]},
  {group:'Teknis', section:'API (Application Programming Interface)', icon:'ğŸ§©', items:[
    'Integrasi pembayaran gateway lokal (Midtrans)',
    'Integrasi API mitra kurir realtime',
    'Integrasi API Maps realtime'
  ]},
  {group:'Teknis', section:'Server', icon:'ğŸ–¥ï¸', items:[
    'Cloud Hosting (Hypercloud â€“ Cloud Plus) Rp. 110.000/bulan',
    '6 Core CPU â€¢ 10 GB RAM â€¢ SSD 50 GB â€¢ Unlimited Bandwidth â€¢ Gratis Unlimited SSL',
    'Proteksi DDoS â€¢ Unlimited Addon Domain â€¢ Backup Mingguan â€¢ Unlimited Email â€¢ Unlimited MySQL',
    'Domain .com (Rp. 200.000) â€” Total (110.000 Ã— 3) + 200.000 = Rp. 530.000'
  ]},
  {group:'Teknis', section:'Cache', icon:'âš¡', items:[
    'Update cache katalog produk 24 jam & antre transaksi (retry)',
    'Audit trail (rekam perubahan harga/stok untuk akuntabilitas)'
  ]},
];

/* Kalender Perbaikan: generate event sepanjang September
   â€” Erik tampil tiap hari (lead) dan mendapatkan porsi > Devin.
   â€” Teknis & Seller default Erik; Buyer default Devin + oversight Erik. */
const FIX_EVENTS_ALL = (() => {
  const queue = [];
  FIXES.forEach(f => f.items.forEach(txt => {
    let primary = 'erik';
    if(f.group==='Buyer') primary = 'devin';
    if(f.group==='Seller' || f.group==='Teknis') primary = 'erik';
    queue.push({group:f.group, section:f.section, text:txt, primary});
  }));
  const start = new Date('2025-09-01'), end = new Date('2025-09-30');
  const evs = [];
  let idx = 0;
  for(let d=new Date(start); d<=end; d.setDate(d.getDate()+1)){
    const ds = d.toISOString().slice(0,10);
    // 3 item/hari (maks) agar terbaca
    for(let k=0;k<3 && idx<queue.length;k++,idx++){
      const it = queue[idx];
      evs.push({d:ds, t:it.primary, label:`${it.group} â€¢ ${it.section}: ${it.text}`, group:it.group});
    }
    // oversight Erik setiap hari
    evs.push({d:ds, t:'erik', label:'Lead oversight (perbaikan)', group:'Oversight'});
  }
  return evs;
})();

/* Helpers shared with Perbaikan */
const fixCalFilter = {cat:'ALL', q:''};
function applyFixFilter(ev){
  const q = fixCalFilter.q.trim().toLowerCase();
  return (fixCalFilter.cat==='ALL' || ev.group===fixCalFilter.cat || ev.group==='Oversight') &&
         (q==='' || ev.label.toLowerCase().includes(q));
}

/* Render kalender + kilas peran (Perbaikan) */
function refreshFixCalendarAndChart(){
  const evs = FIX_EVENTS_ALL.filter(applyFixFilter);
  buildCalendar('fix-cal-grid', evs, 2025, 8);

  const weeks = [
    {label:'Minggu 1 (1â€“7)',   start:new Date('2025-09-01'), end:new Date('2025-09-07')},
    {label:'Minggu 2 (8â€“14)',  start:new Date('2025-09-08'), end:new Date('2025-09-14')},
    {label:'Minggu 3 (15â€“21)', start:new Date('2025-09-15'), end:new Date('2025-09-21')},
    {label:'Minggu 4 (22â€“30)', start:new Date('2025-09-22'), end:new Date('2025-09-30')}
  ];
  const weekly = weeks.map(w=>{
    const roles={erik:0,devin:0};
    evs.forEach(e=>{ if(within(e.d,w.start,w.end) && (e.t==='erik'||e.t==='devin')) roles[e.t]++; });
    return {label:w.label, ...roles};
  });
  const totals = weekly.reduce((a,w)=>({erik:a.erik+w.erik,devin:a.devin+w.devin}),{erik:0,devin:0});
  document.getElementById('fix-kpi-roles').innerHTML = `
    <span class="pill erik">Erik: ${totals.erik}</span>
    <span class="pill devin">Devin: ${totals.devin}</span>`;
  drawRoleBars('fix-role-svg', weekly);
}

/* Render list perbaikan + KPI + ikon */
const root = document.getElementById('fix-root');
function renderFixList(){
  root.innerHTML = '';
  // KPI angka
  const total = FIXES.reduce((a,f)=>a+f.items.length,0);
  const buyer = FIXES.filter(f=>f.group==='Buyer').reduce((a,f)=>a+f.items.length,0);
  const sellerTeknis = FIXES.filter(f=>f.group==='Seller' || f.group==='Teknis').reduce((a,f)=>a+f.items.length,0);
  document.getElementById('kpi-total').textContent = total;
  document.getElementById('kpi-buyer').textContent = buyer;
  document.getElementById('kpi-seller').textContent = sellerTeknis;

  // Filter list sesuai chips + search
  const text = fixCalFilter.q.trim().toLowerCase();
  const data = FIXES
    .filter(f => fixCalFilter.cat==='ALL' || f.group===fixCalFilter.cat)
    .map(f => ({...f, items: f.items.filter(it => it.toLowerCase().includes(text))}))
    .filter(f => f.items.length>0);

  const sectionIcon = {
    'Beranda':'ğŸ ','Pencarian':'ğŸ”','Keranjang':'ğŸ§º','Scan Produk':'ğŸ“·',
    'Riwayat Pembelian':'ğŸ§¾','Profil Buyer':'ğŸ‘¤','Kelola Produk':'ğŸ—ƒï¸',
    'Riwayat Penjualan':'ğŸ“ˆ','Profil Seller':'ğŸ§‘â€ğŸŒ¾',
    'API (Application Programming Interface)':'ğŸ§©','Server':'ğŸ–¥ï¸','Cache':'âš¡'
  };

  data.forEach(f=>{
    const card = document.createElement('div');
    card.className='fix-card';
    const ico = sectionIcon[f.section] || f.icon || 'ğŸ› ï¸';
    const groupBadge = f.group==='Buyer' ? '<span class="icon buyer">ğŸ›’</span>' :
                       f.group==='Seller'? '<span class="icon seller">ğŸ§‘â€ğŸŒ¾</span>' :
                       '<span class="icon api">âš™ï¸</span>';
    card.innerHTML = `
      <div class="fix-head">
        <div>${ico} ${f.section} <small>â€¢ ${f.group}</small></div>
        <div style="display:flex;align-items:center;gap:8px">
          ${groupBadge}
          <span class="badge-cat">${f.items.length} item</span>
        </div>
      </div>
      <div class="fix-body">
        <ul class="fix-list">
          ${f.items.map(it=>`<li>${it}</li>`).join('')}
        </ul>
      </div>`;
    root.appendChild(card);
  });
}

/* Inisialisasi Perbaikan */
refreshFixCalendarAndChart(); renderFixList();

/* Filter chips + Search sinkron ke kalender & list */
document.querySelectorAll('.chip').forEach(ch=>{
  ch.addEventListener('click',()=>{
    document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
    ch.classList.add('active');
    fixCalFilter.cat = ch.dataset.filter;
    refreshFixCalendarAndChart();
    renderFixList();
  });
});
document.getElementById('fix-search').addEventListener('input', e=>{
  fixCalFilter.q = e.target.value || '';
  refreshFixCalendarAndChart();
  renderFixList();
});

/* Biaya total */
document.getElementById('biaya-total').textContent = 'Rp 530.000';
</script>
</body>
</html>
